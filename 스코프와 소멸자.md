# 스코프와 소멸자

스코프란: 이름(변수/객체)이 유효하게 쓰일 수 있는 범위,
          보통 C++에선 { } 블록이 스코프를 만드는 가장 대표적인 경계이다. 
소멸자란:객체가 사라질 때(파괴될 때)  자동으로 호출되는 함수이다.
         주로 그 객체가 쥐고 있던 자원(메모리, 파일, 락, 핸들 등)을 정리하는 데 쓰인다.          

스코프(scope)를 벗어날 때 지역 객체는 파괴되고, 이때 소멸자(destructor)가 자동 호출된다.

## 왜 중요한가
return/예외/분기 때문에 함수가 어디서 끝나든 '스코프 종료 시 소멸자 호출'은 지켜지므로
RAII(자동 정리)의 기반이 된다.

## 핵심 정리
- 지역 변수(automatic storage)는 블록 `{ }`을 벗어나는 순간 파괴된다.
- 객체가 파괴될 때 `~클래스명()` 소멸자가 자동 호출된다.
- 스코프가 여러 겹이면 **안쪽에서 바깥쪽 순서**로 파괴된다(LIFO).
- `return`으로 빠져도 스코프 종료는 동일하게 처리된다.
- 예외가 발생해도 스택 언와인딩 과정에서 지역 객체 소멸자가 호출된다.
## 예제:
#include <iostream>
using namespace std;

class Simple {
    const char* name;
public:
    Simple(const char* n) : name(n) {
        cout << "[생성] " << name << endl;
    }
    ~Simple() {
        cout << "[소멸] " << name << endl;
    }
};

int main() {
    Simple a("A (main)");

    {
        Simple b("B (block)");
        cout << "블록 안에서 작업 중...\n";
    } // ✅ 여기서 b 소멸자 자동 호출

    cout << "블록 밖으로 나옴...\n";
    return 0; // ✅ 여기서 a 소멸자 자동 호출
}
